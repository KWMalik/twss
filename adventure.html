<html>
<head>
<title>Adventure</title>

<link rel="stylesheet" href="http://code.jquery.com/ui/1.8.21/themes/base/jquery-ui.css">
<script src="http://code.jquery.com/jquery-1.7.2.js"></script>
<script src="http://code.jquery.com/ui/1.8.21/jquery-ui.js"></script>

<style>
.ui-autocomplete {
	max-height: 60px;
	overflow-y: auto;
	/* prevent horizontal scrollbar */
	overflow-x: hidden;
	/* add padding to account for vertical scrollbar */
	padding-right: 20px;
}
/* IE 6 doesn't support max-height
 * we use height instead, but this forces the menu to always be this tall
 */
* html .ui-autocomplete {
	height: 100px;
}
</style>

<script>

	//<![CDATA[ 

	$.fn.teletype = function(opts){
	    var $this = this,
	        defaults = {
	            animDelay: 50
	        },
	        settings = $.extend(defaults, opts);

	    $.each(settings.text, function(i, letter){
	        setTimeout(function(){
	            $this.html($this.html() + letter);
	        }, settings.animDelay * i);
	    });
	};

	$(function(){
	    $('#world').teletype({
	        animDelay: 35,
	        text: 'You see a wizard, a cat and a well.  There is a forest to the North and a cave to the East ...'
	    });
	});
	
	$(function() {
		var hashtable = {
			"Go": {"North":null, "East":null},
			"Throw": { 
				"Wizard": {
					"in": {"Well":null, "Cat":null} 
				},
				"Cat": {
					"in": {"Well":null, "Wizard":null}
				} 
			},
			"Say": {
				"to": {
					"Wizard": function(){return hashtable;}(), 
					"Cat": function(){return hashtable;}()
					}
				}
			};
		var commands = [
			"Eat",
			"Say",
			"Throw",
			"Go",
			"Walk"
		];
		$( "#user-input" ).autocomplete({
			source: function( req, resp ) {
				    // if we have a complete word at the start, e.g. "Say" then we can 
					// move to second layer of auto-suggest
					var lookup = req.term;
					// if there is a space then adjust lookup
					var words = req.term.split(" ");
					var list = hashtable;
					var prepend = "";
					if(words.length > 1)
					{
						for(i=0;i<words.length-1;i++)
						{
							list = list[words[i]];
							prepend += words[i] + " ";
						}
						lookup = words[i];
					}
				
                    // req.term is the contents of the input box, e.g. "Sa" or "Say t"
					// element is elements in the array

			        var filtered = $.grep( Object.keys(list), function(el) {
			            return el.indexOf( lookup ) == 0;                                    
			        });
			        // prepend each of filtered
					filtered = $.each(filtered, function(index, value){
						filtered[index] = prepend + value;
					});	

			        resp( filtered );
					// could fill in user-input with most likely match? (in-place autocomplete?)
			    }
		});
	});
	
	

	//]]>  
	
	</script>

</head>
<body>
	

<div id="world">
	
</div>

<div class="demo">
<div class="ui-widget">
  <input name="tags" type="text" id="user-input" value="" size="100">
</div>

</div>
<br />
<br />
<br />
<br />
<hr />
<div>Above is my attempt to implement the sketch below</div>
<img src="images/interactive-fiction-dropdowns.jpg">


</body>
</html>



